<template lang="pug">
#about
  q-drawer(v-model="drawer" show-if-above :width="250" :breakpoint="500" bordered)
    q-tabs.text-teal(v-model="tab" vertical)
      q-tab(name="INFO" label="INFO")
      q-tab(name="PROFILE" label="PROFILE")
      q-tab(name="GALLERY" label="GALLERY")
      q-tab(name="VIDEO" label="VIDEO")

  q-tab-panels(v-model="tab" animated swipeable vertical transition-prev="jump-up" transition-next="jump-up")
    q-tab-panel(name="INFO")
      .text-h4.q-mb-md INFO
      .row
        .col-auto.q-px-md
          q-img(src="@/assets/images/poster.jpg" width="300px")
        .col.q-px-md
          .column
            .col.text-subtitle1 &nbsp;åœ¨åœ°çƒçœ‹ä¸åˆ°çš„æœˆçƒèƒŒé¢ï¼Œæœ‰å€‹ç‰çš‡å¤§å¸ç¶“ç‡Ÿçš„ä¼‘æ¯ç«™ï¼Œä¼‘æ¯ç«™æœ€ç†±é–€çš„å•†åº—"å®‡å®™å¹´ç³•åº—"ï¼Œå®‡å®™å¹´ç³•åº—ä¸­æœ‰éŠ·å”®ä¸€ç­‰çš„åŠŸè‡£â€”å…”å…”ï¼Œå› ç‚ºå—ä¸äº†é »ç¹çš„åŠ ç­ï¼Œå› æ­¤èˆˆèµ·äº†é€ƒå¾€åœ°çƒçš„å¿µé ­ã€‚ç™¼ç¾å…”å­å¯«äº†è¾­è·ä¿¡é€ƒå¾€åœ°çƒçš„ç‰çš‡å¤§å¸éœ‡æ€’ï¼Œä¸‹ä»¤æŠ“åˆ°å…”å­çš„äººå°‡çµ¦äºˆè±åšçš„çé‡‘ã€‚ç‚ºäº†å¾—åˆ°è±åšçš„çé‡‘ï¼Œç”±å››ä½ä¾†è‡ªå¹³è¡Œå®‡å®™åœ°çƒçš„å‹‡å£«å°±é€™æ¨£å‡ºå‹•äº†ã€‚
            .col.q-mt-xl
              .text-h6.text-center.q-mb-md æ’­å‡ºè³‡è¨Š
              .row
                .text-subtitle1 &nbsp; æ’­å‡ºæ™‚é–“ &nbsp;|
                .text-subtitle1 &nbsp;&nbsp;&nbsp;2022å¹´6æœˆ24æ—¥ï¼2022å¹´9æœˆ16æ—¥
              .row
                .text-subtitle1 &nbsp; ç¸½&nbsp;&nbsp;å°&nbsp;&nbsp; æ¼” &nbsp;|
                .text-subtitle1 &nbsp;&nbsp;&nbsp;ç¾…äéŒ«ã€æœ´è³¢å‹‡
              .row
                .text-subtitle1 &nbsp; ä¸»&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ¼” &nbsp;|
                .text-subtitle1 &nbsp;&nbsp;&nbsp;ææ©æ™ºã€MIMIã€ææ³³çŸ¥ã€å®‰ä¿çœŸ
              .row
                .text-subtitle1 &nbsp; é›†&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ•¸ &nbsp;|
                .text-subtitle1 &nbsp;&nbsp;&nbsp;ç¬¬ä¸€å­£ 12 é›†ã€ç¬¬äºŒå­£ éŒ„è£½ä¸­
              .row
                .text-subtitle1 &nbsp; ä¸²æµå¹³å° &nbsp;|
                .text-subtitle1 &nbsp;&nbsp;&nbsp;LINE TVã€friDay

    q-tab-panel(name="PROFILE")
      .text-h4.q-mb-md profile

    q-tab-panel(name="GALLERY")
      .text-h5 æœ€æ–°ä¸Šå‚³
      .q-pa-md
        swiper(v-bind="swiperOptions")
          swiper-slide(v-for="photo in photos.slice(0, 1)" :key="photo._id")
            q-img(:src="photo.image")
          template(v-for="photo in photos.slice(0, 1)")
            swiper-slide(v-for="p in photo.images" )
              q-img(:src="p")

      q-separator.q-my-md

      .text-h5 All
        .row.justify-evenly
          .col-3.cursor-pointer.q-ma-md(v-for="(photo, idx) in photos" :key="photo._id" @click="swiperDialog(idx)")
            q-card.card
              q-img(:src='photo.image' height="150px")
              q-card-section
                .text-subtitle1 {{ photo.name }}
                .text-subtitle2 {{ new Date(photo.date).toLocaleString() }}

    q-tab-panel(name="VIDEO")
      q-expansion-item.q-my-sm.shadow-1.overflow-hidden(default-opened group="ablum" style='border-radius: 10px' icon='album' label='HIGHLIGHT' header-class='bg-warning text-black text-weight-bold' expand-icon-class='text-black')
        .row.justify-evenly
          q-card.my-card.col-3.q-mx-sm.q-my-md
            //- q-skeleton( width="100%" )
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/Q-NxDZLtELc")
            q-card-section
              .text-subtitle1 ì „ì„¤ì˜ ë ˆì „ë“œ ì§€ë½ì‹¤.ZIP??
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/9J28BsI-Z14")
            q-card-section
              .text-subtitle1 æœªç™¼å¸ƒçš„â€œå¤©æ°£ä»»å‹™â€å²è©©å³å°‡ç™¼å¸ƒ
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed//nc3dfwflC4s")
            q-card-section
              .text-subtitle1 KGë°›ëŠ” í† ë¡±ì´ ì¡ê¸° ëŒ€ì‘ì „.ZIPğŸ“‚
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/durLpBwXh9g")
            q-card-section
              .text-subtitle1 ì „ì„¤ì˜ ë ˆì „ë“œ ì§€ë½ì‹¤.ZIP??
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/g_ETO-W-0lU")
            q-card-section
              .text-subtitle1 æ†¤æ€’çš„åœ°çƒå¨›æ¨‚å®¤è€é—†.ZIP
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed//1DtzFseJnV4")
            q-card-section
              .text-subtitle1 åœ°å¨›å®¤æˆå“¡é¦–æ¬¡ç¢°é¢å¾Œçš„æœªå…¬é–‹èŠ±çµ®
      q-expansion-item.q-my-sm.shadow-1.overflow-hidden(group="ablum" style='border-radius: 10px' icon='album' label='SPECIAL' header-class='bg-warning text-black text-weight-bold' expand-icon-class='text-black')
        .row.justify-evenly
          q-card.my-card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/Q-NxDZLtELc")
            q-card-section
              .text-subtitle1 ì „ì„¤ì˜ ë ˆì „ë“œ ì§€ë½ì‹¤.ZIP??
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/9J28BsI-Z14")
            q-card-section
              .text-subtitle1 æœªç™¼å¸ƒçš„â€œå¤©æ°£ä»»å‹™â€å²è©©å³å°‡ç™¼å¸ƒ
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed//nc3dfwflC4s")
            q-card-section
              .text-subtitle1 KGë°›ëŠ” í† ë¡±ì´ ì¡ê¸° ëŒ€ì‘ì „.ZIPğŸ“‚
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/durLpBwXh9g")
            q-card-section
              .text-subtitle1 ì „ì„¤ì˜ ë ˆì „ë“œ ì§€ë½ì‹¤.ZIP??
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/g_ETO-W-0lU")
            q-card-section
              .text-subtitle1 æ†¤æ€’çš„åœ°çƒå¨›æ¨‚å®¤è€é—†.ZIP
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed//1DtzFseJnV4")
            q-card-section
              .text-subtitle1 åœ°å¨›å®¤æˆå“¡é¦–æ¬¡ç¢°é¢å¾Œçš„æœªå…¬é–‹èŠ±çµ®
      q-expansion-item.q-my-sm.shadow-1.overflow-hidden(group="ablum" style='border-radius: 10px' icon='album' label='PREVIEW' header-class='bg-warning text-black text-weight-bold' expand-icon-class='text-black')
        .row.justify-evenly
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/EFN9_cj1IfU")
            q-card-section
              .text-subtitle1 [æœ€çµ‚è©±é å‘Š] æ·±å¤œå‹•ä½œåŠ‡â˜… éå»ç´„å®šçš„â€œè¦ºé†’ä»»å‹™â€COMING SOON
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/puVobEsPsyc")
            q-card-section
              .text-subtitle1 ã€æœ€çµ‚è©±é å‘Šã€‘éœ‡æ’¼æ›¼è°·ä¸€å¤œçš„é‚£å€‹ï¼Ÿï¼Ÿ ä»¤äººå¿ƒç¢çš„å¤©æ°£ä»»å‹™å¤§å…¬é–‹
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed//uPqku0EPkH0")
            q-card-section
              .text-subtitle1 ã€ç¬¬11é›†é å‘Šã€‘å¾åƒè²¨åˆ°èˆæœƒï¼ ä¾†ä¸€å ´å…¨ç¨‹èª²ç¨‹åŒ…åƒ¹éŠâ™¬
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/A5Jb246DLJ4")
            q-card-section
              .text-subtitle1 ã€ç¬¬11é›†é å‘Šã€‘ç¶œåˆå¤§ç¦®åŒ…stæš‘æœŸçå‹µå‡æœŸï¼Ÿï¼Ÿ é †å¸¶ä¸€æ...ï¼Ÿ
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed/2kkHqDS4XEQ")
            q-card-section
              .text-subtitle1 [ç¬¬10é›†é å‘Š] é»å¿ƒé¤…ä¹¾æ¸¬é©—ï¼ å‰æ‹‰å…‹æ–¯å’†å“®äº‹ä»¶çš„ä¾†é¾å»è„ˆâ€¦â€¦ï¼Ÿ
          q-card.card.col-3.q-mx-sm.q-my-md
            q-video(:ratio='16/9' src="https://www.youtube.com/embed//seqQbIDKr04")
            q-card-section
              .text-subtitle1 ã€ç¬¬10é›†é å‘Šã€‘â€œç‰çš‡å¤§å¸è«‹å®¢ï¼â€ç´€å¿µæŠ“åˆ°å…”ç“ï¼ åœ‹å…§çå‹µå‡æœŸé–‹å§‹ï¼Ÿï¼Ÿ

//- å€‹åˆ¥ç›¸ç°¿
q-dialog(v-model="dialog")
  q-card
    q-card-section
      swiper(v-bind="albumOptions")
        swiper-slide
          q-img(:src="photos[dialogidx].image" width="550px")
        swiper-slide(v-for="p in photos[dialogidx].images" )
          q-img(:src="p")
</template>

<script setup>
import { ref, reactive } from 'vue'
import { Swiper, SwiperSlide } from 'swiper/vue'
import { Navigation, Pagination, Scrollbar, Autoplay } from 'swiper'
import Swal from 'sweetalert2'
import { api } from 'src/boot/axios'
import { useRouter } from 'vue-router'
import 'swiper/css/bundle'

const tab = ref('PHOTO')
const link = ref('INFO')
const drawer = ref(true)
const dialog = ref(false)
const dialogidx = ref(0)
const photos = reactive([])
const router = useRouter()

const swiperDialog = (idx) => {
  dialog.value = true
  dialogidx.value = idx
}

// onMounted(() => {
const swiperOptions = {
  modules: [Navigation, Pagination, Scrollbar, Autoplay],
  slidesPerView: 1,
  spaceBetween: 10,
  navigation: {
    prevEl: '.swiper-button-prev',
    nextEl: '.swiper-button-next'
  },
  breakpoints: {
    768: {
      slidesPerView: 2,
      spaceBetween: 20
    },
    1200: {
      slidesPerView: 4,
      spaceBetween: 40
    }
  },
  // autoplay: {
  //   delay: 2500
  // },
  loop: true,
  scrollbar: {
    draggable: true,
    hide: true
  }
}
const albumOptions = {
  modules: [Navigation, Pagination, Scrollbar, Autoplay],
  slidesPerView: 1,
  spaceBetween: 10,
  navigation: {
    prevEl: '.swiper-button-prev',
    nextEl: '.swiper-button-next'
  },
  // autoplay: {
  //   delay: 2500
  // },
  loop: true,
  scrollbar: {
    draggable: true
  }
};
// })

(async () => {
  try {
    const { data } = await api.get('/photos')
    photos.push(...data.result)
    photos.reverse()
    console.log(photos)
  } catch (error) {
    Swal.fire({
      toast: true,
      timer: 1000,
      showConfirmButton: false,
      background: '#F5ABA5',
      icon: 'error',
      color: 'black',
      text: error?.response?.data?.message || 'ç™¼ç”ŸéŒ¯èª¤ï¼'
    })
  }
})()
</script>

<style lang="scss">
#about {
  .swiper-button-prev,
  .swiper-button-next {
    color: aliceblue;
  }
  .card .text-subtitle1 {
    display: -webkit-box;
    overflow: hidden;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
    text-overflow: ellipsis;
  }
}
</style>
